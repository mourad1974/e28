<template>
  <div id='featured'>
    <h2>Featured Products</h2>
    <router-link to='{name: "product", params: { "id" :product.id}}'>
      <ul class='cleanList'>
        <li v-for='product in featuredProducts' :key='product.id'>
          {{ product.name }}
          <br />
          <img :src='require("./../assets/images/products/" + product.id + ".jpg")' />
        </li>
      </ul>
    </router-link>
  </div>
</template>
<script>
import { products } from './../products.js';
import * as app from './../app.js';

export default {
  name: 'ShowFeatured',
  props: ['category'],

  data: function() {
    return {
      products: products
    };
  },
  mounted() {
    app.axios
      .get(app.config.api + '/product/' + this.id)
      .then(response => {
        this.product = response.data;
      });
  },
  computed: {
    featuredProducts: function() {
      function isMatch(product) {
        return product.categories.includes(this);
      }
      return this.products.filter(isMatch, this.category);
    }
  }
};
</script>
<style lang="less" scoped>
</style>
